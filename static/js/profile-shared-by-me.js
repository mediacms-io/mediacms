!function(){"use strict";var e,t={463:function(e,t,n){n.d(t,{c:function(){return i}});var a=n(4571),o=n.n(a);function i(e,t){let n=o()(e,{});return""!==n.origin&&"null"!==n.origin&&n.origin||(n=o()(t+"/"+e.replace(/^\//g,""),{})),n.toString()}},1003:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListHeader=void 0;var o=a(n(9471)),i=n(1838);t.MediaListHeader=function(e){var t=e.viewAllText||(0,i.translateString)("VIEW ALL");return o.default.createElement("div",{className:(e.className?e.className+" ":"")+"media-list-header",style:e.style},o.default.createElement("h2",null,e.title),e.viewAllLink?o.default.createElement("h3",null," ",o.default.createElement("a",{href:e.viewAllLink,title:t}," ",t||e.viewAllLink," ")," "):null)}},1148:function(e,t,n){var a=n(2985),o=n(9471),i=n(8713),s=n.n(i),r=n(8790),l=n(7460),u=n(285),c=n(2855),d=n(1177),h=n(239),g=n(7731),m=n(3160),f=n(9294),p=n(4473),b=n(3176),y=n(6918),S=n(2727),M=n(6172),C=n(7226),w=n(4353),k=n(8447);function A(e){let{showConfirmModal:t,confirmMessage:n,onConfirmCancel:a,onConfirmProceed:i,showPermissionModal:s,permissionType:r,selectedMediaIds:l,onPermissionModalCancel:u,onPermissionModalSuccess:c,onPermissionModalError:d,showPlaylistModal:h,onPlaylistModalCancel:g,onPlaylistModalSuccess:m,onPlaylistModalError:f,username:p,showChangeOwnerModal:A,onChangeOwnerModalCancel:_,onChangeOwnerModalSuccess:v,onChangeOwnerModalError:P,showPublishStateModal:T,onPublishStateModalCancel:E,onPublishStateModalSuccess:q,onPublishStateModalError:R,showCategoryModal:O,onCategoryModalCancel:I,onCategoryModalSuccess:F,onCategoryModalError:x,showTagModal:N,onTagModalCancel:U,onTagModalSuccess:L,onTagModalError:D,csrfToken:j,showNotification:z,notificationMessage:B,notificationType:V}=e;return o.createElement(o.Fragment,null,o.createElement(b.BulkActionConfirmModal,{isOpen:t,message:n,onCancel:a,onProceed:i}),o.createElement(y.BulkActionPermissionModal,{isOpen:s,permissionType:r,selectedMediaIds:l,onCancel:u,onSuccess:c,onError:d,csrfToken:j}),o.createElement(S.BulkActionPlaylistModal,{isOpen:h,selectedMediaIds:l,onCancel:g,onSuccess:m,onError:f,csrfToken:j,username:p}),o.createElement(M.BulkActionChangeOwnerModal,{isOpen:A,selectedMediaIds:l,onCancel:_,onSuccess:v,onError:P,csrfToken:j}),o.createElement(C.BulkActionPublishStateModal,{isOpen:T,selectedMediaIds:l,onCancel:E,onSuccess:q,onError:R,csrfToken:j}),o.createElement(w.BulkActionCategoryModal,{isOpen:O,selectedMediaIds:l,onCancel:I,onSuccess:F,onError:x,csrfToken:j}),o.createElement(k.BulkActionTagModal,{isOpen:N,selectedMediaIds:l,onCancel:U,onSuccess:L,onError:D,csrfToken:j}),z&&o.createElement("div",{style:{position:"fixed",bottom:"20px",left:"260px",backgroundColor:"error"===V?"#f44336":"#4CAF50",color:"white",padding:"16px 24px",borderRadius:"4px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,fontSize:"14px",fontWeight:"500"}},B))}A.propTypes={showConfirmModal:s().bool.isRequired,confirmMessage:s().string.isRequired,onConfirmCancel:s().func.isRequired,onConfirmProceed:s().func.isRequired,showPermissionModal:s().bool.isRequired,permissionType:s().oneOf(["viewer","editor","owner",null]),selectedMediaIds:s().array.isRequired,onPermissionModalCancel:s().func.isRequired,onPermissionModalSuccess:s().func.isRequired,onPermissionModalError:s().func.isRequired,showPlaylistModal:s().bool.isRequired,onPlaylistModalCancel:s().func.isRequired,onPlaylistModalSuccess:s().func.isRequired,onPlaylistModalError:s().func.isRequired,username:s().string,showChangeOwnerModal:s().bool.isRequired,onChangeOwnerModalCancel:s().func.isRequired,onChangeOwnerModalSuccess:s().func.isRequired,onChangeOwnerModalError:s().func.isRequired,showPublishStateModal:s().bool.isRequired,onPublishStateModalCancel:s().func.isRequired,onPublishStateModalSuccess:s().func.isRequired,onPublishStateModalError:s().func.isRequired,showCategoryModal:s().bool.isRequired,onCategoryModalCancel:s().func.isRequired,onCategoryModalSuccess:s().func.isRequired,onCategoryModalError:s().func.isRequired,showTagModal:s().bool.isRequired,onTagModalCancel:s().func.isRequired,onTagModalSuccess:s().func.isRequired,onTagModalError:s().func.isRequired,csrfToken:s().string.isRequired,showNotification:s().bool.isRequired,notificationMessage:s().string.isRequired,notificationType:s().oneOf(["success","error"]).isRequired},n(1838);var _=n(4853);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},v.apply(null,arguments)}var P=n(9479);function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},T.apply(null,arguments)}function E(e){return o.createElement(r.LinksConsumer,null,(e=>o.createElement("div",{className:"empty-media empty-channel-media"},o.createElement("div",{className:"welcome-title"},"No shared media"),o.createElement("div",{className:"start-uploading"},"Media that you have shared with others will show up here."))))}class q extends P.Y{constructor(e,t){super(e,"string"==typeof t?t:"author-shared-by-me"),this.profilePageSlug="string"==typeof t?t:"author-shared-by-me",this.state={channelMediaCount:-1,author:l.ProfilePageStore.get("author-data"),uploadsPreviewItemsCount:0,title:this.props.title,query:l.ProfilePageStore.get("author-query"),requestUrl:null,hiddenFilters:!0,hiddenTags:!0,hiddenSorting:!0,filterArgs:"",availableTags:[],selectedTag:"all",selectedSort:"date_added_desc"},this.authorDataLoad=this.authorDataLoad.bind(this),this.onAuthorPreviewItemsCountCallback=this.onAuthorPreviewItemsCountCallback.bind(this),this.getCountFunc=this.getCountFunc.bind(this),this.changeRequestQuery=this.changeRequestQuery.bind(this),this.onToggleFiltersClick=this.onToggleFiltersClick.bind(this),this.onToggleTagsClick=this.onToggleTagsClick.bind(this),this.onToggleSortingClick=this.onToggleSortingClick.bind(this),this.onFiltersUpdate=this.onFiltersUpdate.bind(this),this.onTagSelect=this.onTagSelect.bind(this),this.onSortSelect=this.onSortSelect.bind(this),this.onResponseDataLoaded=this.onResponseDataLoaded.bind(this),l.ProfilePageStore.on("load-author-data",this.authorDataLoad)}componentDidMount(){u.ProfilePageActions.load_author_data()}authorDataLoad(){const e=l.ProfilePageStore.get("author-data");let t=this.state.requestUrl;e&&(t=this.state.query?r.ApiUrlContext._currentValue.media+"?author="+e.id+"&show=shared_by_me&q="+encodeURIComponent(this.state.query)+this.state.filterArgs:r.ApiUrlContext._currentValue.media+"?author="+e.id+"&show=shared_by_me"+this.state.filterArgs),this.setState({author:e,requestUrl:t})}onAuthorPreviewItemsCountCallback(e){this.setState({uploadsPreviewItemsCount:e})}getCountFunc(e){this.setState({channelMediaCount:e},(()=>{if(this.state.query){let t="";t=e?1===e?'1 result for "'+this.state.query+'"':e+' results for "'+this.state.query+'"':'No results for "'+this.state.query+'"',this.setState({title:t})}}))}changeRequestQuery(e){if(!this.state.author)return;let t;t=e?r.ApiUrlContext._currentValue.media+"?author="+this.state.author.id+"&show=shared_by_me&q="+encodeURIComponent(e)+this.state.filterArgs:r.ApiUrlContext._currentValue.media+"?author="+this.state.author.id+"&show=shared_by_me"+this.state.filterArgs;let n=this.state.title;""===e&&(n=this.props.title),this.setState({requestUrl:t,query:e,title:n})}onToggleFiltersClick(){this.setState({hiddenFilters:!this.state.hiddenFilters,hiddenTags:!0,hiddenSorting:!0})}onToggleTagsClick(){this.setState({hiddenFilters:!0,hiddenTags:!this.state.hiddenTags,hiddenSorting:!0})}onToggleSortingClick(){this.setState({hiddenFilters:!0,hiddenTags:!0,hiddenSorting:!this.state.hiddenSorting})}onTagSelect(e){this.setState({selectedTag:e},(()=>{this.onFiltersUpdate({media_type:this.state.filterArgs.match(/media_type=([^&]+)/)?.[1],upload_date:this.state.filterArgs.match(/upload_date=([^&]+)/)?.[1],duration:this.state.filterArgs.match(/duration=([^&]+)/)?.[1],publish_state:this.state.filterArgs.match(/publish_state=([^&]+)/)?.[1],sort_by:this.state.selectedSort,tag:e})}))}onSortSelect(e){this.setState({selectedSort:e},(()=>{this.onFiltersUpdate({media_type:this.state.filterArgs.match(/media_type=([^&]+)/)?.[1],upload_date:this.state.filterArgs.match(/upload_date=([^&]+)/)?.[1],duration:this.state.filterArgs.match(/duration=([^&]+)/)?.[1],publish_state:this.state.filterArgs.match(/publish_state=([^&]+)/)?.[1],sort_by:e,tag:this.state.selectedTag})}))}onFiltersUpdate(e){const t={media_type:null,upload_date:null,duration:null,publish_state:null,sort_by:null,ordering:null,t:null};switch(e.media_type){case"video":case"audio":case"image":case"pdf":t.media_type=e.media_type}switch(e.upload_date){case"today":case"this_week":case"this_month":case"this_year":t.upload_date=e.upload_date}switch(e.duration&&"all"!==e.duration&&(t.duration=e.duration),e.publish_state&&"all"!==e.publish_state&&(t.publish_state=e.publish_state),e.sort_by){case"date_added_desc":break;case"date_added_asc":t.ordering="asc";break;case"alphabetically_asc":t.sort_by="title_asc";break;case"alphabetically_desc":t.sort_by="title_desc";break;case"plays_least":t.sort_by="views_asc";break;case"plays_most":t.sort_by="views_desc";break;case"likes_least":t.sort_by="likes_asc";break;case"likes_most":t.sort_by="likes_desc"}e.tag&&"all"!==e.tag&&(t.t=e.tag);const n=[];for(let e in t)null!==t[e]&&n.push(e+"="+t[e]);this.setState({filterArgs:n.length?"&"+n.join("&"):""},(function(){if(!this.state.author)return;let e;e=this.state.query?r.ApiUrlContext._currentValue.media+"?author="+this.state.author.id+"&show=shared_by_me&q="+encodeURIComponent(this.state.query)+this.state.filterArgs:r.ApiUrlContext._currentValue.media+"?author="+this.state.author.id+"&show=shared_by_me"+this.state.filterArgs,this.setState({requestUrl:e})}))}onResponseDataLoaded(e){if(e&&e.tags){const t=e.tags.split(",").map((e=>e.trim())).filter((e=>e));this.setState({availableTags:t})}}pageContent(){const e=l.ProfilePageStore.get("author-data"),t=e&&e.username===r.MemberContext._currentValue.username,n=this.state.filterArgs&&(this.state.filterArgs.includes("media_type=")||this.state.filterArgs.includes("upload_date=")||this.state.filterArgs.includes("duration=")||this.state.filterArgs.includes("publish_state="));return[this.state.author?o.createElement(d.A,{key:"ProfilePagesHeader",author:this.state.author,type:"shared_by_me",onQueryChange:this.changeRequestQuery,onToggleFiltersClick:this.onToggleFiltersClick,onToggleTagsClick:this.onToggleTagsClick,onToggleSortingClick:this.onToggleSortingClick,hasActiveFilters:n,hasActiveTags:"all"!==this.state.selectedTag,hasActiveSort:"date_added_desc"!==this.state.selectedSort}):null,this.state.author?o.createElement(h.A,{key:"ProfilePagesContent"},o.createElement(c.MediaListWrapper,{title:this.state.title,className:"items-list-ver",showBulkActions:t,selectedCount:this.props.bulkActions.selectedMedia.size,totalCount:this.props.bulkActions.availableMediaIds.length,onBulkAction:this.props.bulkActions.handleBulkAction,onSelectAll:this.props.bulkActions.handleSelectAll,onDeselectAll:this.props.bulkActions.handleDeselectAll},o.createElement(m.F,{hidden:this.state.hiddenFilters,tags:this.state.availableTags,onFiltersUpdate:this.onFiltersUpdate}),o.createElement(f.L,{hidden:this.state.hiddenTags,tags:this.state.availableTags,onTagSelect:this.onTagSelect}),o.createElement(p.s,{hidden:this.state.hiddenSorting,onSortSelect:this.onSortSelect}),o.createElement(g.LazyLoadItemListAsync,{key:`${this.state.requestUrl}-${this.props.bulkActions.listKey}`,requestUrl:this.state.requestUrl,hideAuthor:!0,itemsCountCallback:this.state.requestUrl?this.getCountFunc:null,hideViews:!l.PageStore.get("config-media-item").displayViews,hideDate:!l.PageStore.get("config-media-item").displayPublishDate,canEdit:t,onResponseDataLoaded:this.onResponseDataLoaded,showSelection:t,hasAnySelection:this.props.bulkActions.selectedMedia.size>0,selectedMedia:this.props.bulkActions.selectedMedia,onMediaSelection:this.props.bulkActions.handleMediaSelection,onItemsUpdate:this.props.bulkActions.handleItemsUpdate}),t&&0===this.state.channelMediaCount&&!this.state.query?o.createElement(E,{name:this.state.author.name}):null)):null,this.state.author&&t?o.createElement(A,T({key:"BulkActionsModals"},this.props.bulkActions,{selectedMediaIds:Array.from(this.props.bulkActions.selectedMedia),csrfToken:this.props.bulkActions.getCsrfToken(),username:this.state.author.username,onConfirmCancel:this.props.bulkActions.handleConfirmCancel,onConfirmProceed:this.props.bulkActions.handleConfirmProceed,onPermissionModalCancel:this.props.bulkActions.handlePermissionModalCancel,onPermissionModalSuccess:this.props.bulkActions.handlePermissionModalSuccess,onPermissionModalError:this.props.bulkActions.handlePermissionModalError,onPlaylistModalCancel:this.props.bulkActions.handlePlaylistModalCancel,onPlaylistModalSuccess:this.props.bulkActions.handlePlaylistModalSuccess,onPlaylistModalError:this.props.bulkActions.handlePlaylistModalError,onChangeOwnerModalCancel:this.props.bulkActions.handleChangeOwnerModalCancel,onChangeOwnerModalSuccess:this.props.bulkActions.handleChangeOwnerModalSuccess,onChangeOwnerModalError:this.props.bulkActions.handleChangeOwnerModalError,onPublishStateModalCancel:this.props.bulkActions.handlePublishStateModalCancel,onPublishStateModalSuccess:this.props.bulkActions.handlePublishStateModalSuccess,onPublishStateModalError:this.props.bulkActions.handlePublishStateModalError,onCategoryModalCancel:this.props.bulkActions.handleCategoryModalCancel,onCategoryModalSuccess:this.props.bulkActions.handleCategoryModalSuccess,onCategoryModalError:this.props.bulkActions.handleCategoryModalError,onTagModalCancel:this.props.bulkActions.handleTagModalCancel,onTagModalSuccess:this.props.bulkActions.handleTagModalSuccess,onTagModalError:this.props.bulkActions.handleTagModalError})):null]}}q.propTypes={title:s().string.isRequired,bulkActions:s().object.isRequired},q.defaultProps={title:"Shared by me"};const R=(O=q,function(e){const t=(0,_.useBulkActions)();return o.createElement(O,v({},e,{bulkActions:t}))});var O;(0,a.C)("page-profile-shared-by-me",R)},1453:function(e,t,n){function a(e,t,n){var a=e[t];e[t]=e[n],e[n]=a}function o(e,t,n){var i;return e.length,t<n&&(i=function(e,t,n,o){for(var i=e[t],s=n,r=n;r<o;r++)e[r]<i&&(a(e,r,s),s++);return a(e,o,s),s}(e,n,t,n),o(e,t,i-1),o(e,i+1,n)),e}n.d(t,{g:function(){return o}})},1838:function(e,t,n){n.r(t),n.d(t,{BrowserEvents:function(){return a.GT},PositiveInteger:function(){return g.e},PositiveIntegerOrZero:function(){return g.R},addClassname:function(){return a.zc},cancelAnimationFrame:function(){return a.uU},csrfToken:function(){return u.G},deleteRequest:function(){return p.Fb},error:function(){return d.z},exportStore:function(){return i.A},formatInnerLink:function(){return s.c},formatManagementTableDate:function(){return r.n},formatViewsNumber:function(){return l.A},getRequest:function(){return p.iq},greaterCommonDivision:function(){return h.p7},hasClassname:function(){return a.CX},imageExtension:function(){return c.t},isGt:function(){return h.en},isInteger:function(){return h.Fq},isNumber:function(){return h.Et},isPositive:function(){return h.ep},isPositiveInteger:function(){return h.q6},isPositiveIntegerOrZero:function(){return h.tR},isPositiveNumber:function(){return h.F5},isZero:function(){return h.be},logErrorAndReturnError:function(){return o.m},logWarningAndReturnError:function(){return o.g},postRequest:function(){return p.MB},publishedOnDate:function(){return m.A},putRequest:function(){return p.zi},quickSort:function(){return f.g},removeClassname:function(){return a.qk},replaceString:function(){return y.u},requestAnimationFrame:function(){return a.xi},supportsSvgAsImg:function(){return a.kN},translateString:function(){return b.g},warn:function(){return d.R}});var a=n(1134),o=n(6403),i=n(977),s=n(463),r=n(8482),l=n(4632),u=n(5393),c=n(1554),d=n(8004),h=n(8354),g=n(1702),m=n(7673),f=n(1453),p=n(9659),b=n(4036),y=n(4470)},2101:function(e,t,n){n.r(t)},4853:function(e,t,n){n.r(t),n.d(t,{useBulkActions:function(){return i}});var a=n(9471),o=n(1838);function i(){const[e,t]=(0,a.useState)(new Set),[n,i]=(0,a.useState)([]),[s,r]=(0,a.useState)(!1),[l,u]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[h,g]=(0,a.useState)(0),[m,f]=(0,a.useState)(""),[p,b]=(0,a.useState)(!1),[y,S]=(0,a.useState)("success"),[M,C]=(0,a.useState)(!1),[w,k]=(0,a.useState)(null),[A,_]=(0,a.useState)(!1),[v,P]=(0,a.useState)(!1),[T,E]=(0,a.useState)(!1),[q,R]=(0,a.useState)(!1),[O,I]=(0,a.useState)(!1),F=()=>{let e=null;if(document.cookie&&""!==document.cookie){const t=document.cookie.split(";");for(let n=0;n<t.length;n++){const a=t[n].trim();if("csrftoken="===a.substring(0,10)){e=decodeURIComponent(a.substring(10));break}}}return e},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";f(e),b(!0),S(t),setTimeout((()=>{b(!1)}),5e3)},N=()=>{t(new Set)},U=()=>{t(new Set),g((e=>e+1))};return{selectedMedia:e,availableMediaIds:n,listKey:h,showConfirmModal:s,confirmMessage:c,notificationMessage:m,showNotification:p,notificationType:y,showPermissionModal:M,permissionType:w,showPlaylistModal:A,showChangeOwnerModal:v,showPublishStateModal:T,showCategoryModal:q,showTagModal:O,handleMediaSelection:(e,n)=>{t((t=>{const a=new Set(t);return n?a.add(e):a.delete(e),a}))},handleItemsUpdate:e=>{const t=e.map((e=>e.friendly_token||e.uid||e.id));i(t)},handleSelectAll:()=>{t(new Set(n))},handleDeselectAll:()=>{t(new Set)},handleBulkAction:t=>{const n=e.size;0!==n&&("delete-media"===t?(r(!0),u(t),d((0,o.translateString)("You are going to delete")+` ${n} `+(0,o.translateString)("media, are you sure?"))):"enable-comments"===t?(r(!0),u(t),d((0,o.translateString)("You are going to enable comments to")+` ${n} `+(0,o.translateString)("media, are you sure?"))):"disable-comments"===t?(r(!0),u(t),d((0,o.translateString)("You are going to disable comments to")+` ${n} `+(0,o.translateString)("media, are you sure?"))):"enable-download"===t?(r(!0),u(t),d((0,o.translateString)("You are going to enable download for")+` ${n} `+(0,o.translateString)("media, are you sure?"))):"disable-download"===t?(r(!0),u(t),d((0,o.translateString)("You are going to disable download for")+` ${n} `+(0,o.translateString)("media, are you sure?"))):"copy-media"===t?(r(!0),u(t),d((0,o.translateString)("You are going to copy")+` ${n} `+(0,o.translateString)("media, are you sure?"))):"add-remove-coviewers"===t?(C(!0),k("viewer")):"add-remove-coeditors"===t?(C(!0),k("editor")):"add-remove-coowners"===t?(C(!0),k("owner")):"add-remove-playlist"===t?_(!0):"change-owner"===t?P(!0):"publish-state"===t?E(!0):"add-remove-category"===t?R(!0):"add-remove-tags"===t&&I(!0))},handleConfirmCancel:()=>{r(!1),u(null),d("")},handleConfirmProceed:()=>{const t=l;r(!1),u(null),d(""),"delete-media"===t?(()=>{const t=Array.from(e),n=t.length;fetch("/api/v1/media/user/bulk_actions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F()},body:JSON.stringify({action:"delete_media",media_ids:t})}).then((e=>{if(!e.ok)throw new Error("Failed to delete media");return e.json()})).then((e=>{const t=1===n?(0,o.translateString)("The media was deleted successfully."):(0,o.translateString)("Successfully deleted")+` ${n} `+(0,o.translateString)("media.");x(t),U()})).catch((e=>{x((0,o.translateString)("Failed to delete media. Please try again."),"error"),U()}))})():"enable-comments"===t?(()=>{const t=Array.from(e);fetch("/api/v1/media/user/bulk_actions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F()},body:JSON.stringify({action:"enable_comments",media_ids:t})}).then((e=>{if(!e.ok)throw new Error("Failed to enable comments");return e.json()})).then((e=>{x((0,o.translateString)("Successfully Enabled comments")),N()})).catch((e=>{x((0,o.translateString)("Failed to enable comments."),"error"),N()}))})():"disable-comments"===t?(()=>{const t=Array.from(e);fetch("/api/v1/media/user/bulk_actions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F()},body:JSON.stringify({action:"disable_comments",media_ids:t})}).then((e=>{if(!e.ok)throw new Error("Failed to disable comments");return e.json()})).then((e=>{x((0,o.translateString)("Successfully Disabled comments")),N()})).catch((e=>{x((0,o.translateString)("Failed to disable comments."),"error"),N()}))})():"enable-download"===t?(()=>{const t=Array.from(e);fetch("/api/v1/media/user/bulk_actions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F()},body:JSON.stringify({action:"enable_download",media_ids:t})}).then((e=>{if(!e.ok)throw new Error("Failed to enable download");return e.json()})).then((e=>{x((0,o.translateString)("Successfully Enabled Download")),N()})).catch((e=>{x((0,o.translateString)("Failed to enable download."),"error"),N()}))})():"disable-download"===t?(()=>{const t=Array.from(e);fetch("/api/v1/media/user/bulk_actions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F()},body:JSON.stringify({action:"disable_download",media_ids:t})}).then((e=>{if(!e.ok)throw new Error("Failed to disable download");return e.json()})).then((e=>{x((0,o.translateString)("Successfully Disabled Download")),N()})).catch((e=>{x((0,o.translateString)("Failed to disable download."),"error"),N()}))})():"copy-media"===t&&(()=>{const t=Array.from(e);fetch("/api/v1/media/user/bulk_actions",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":F()},body:JSON.stringify({action:"copy_media",media_ids:t})}).then((e=>{if(!e.ok)throw new Error("Failed to copy media");return e.json()})).then((e=>{x((0,o.translateString)("Successfully Copied")),U()})).catch((e=>{x((0,o.translateString)("Failed to copy media."),"error"),N()}))})()},handlePermissionModalCancel:()=>{C(!1),k(null)},handlePermissionModalSuccess:e=>{x(e),N(),C(!1),k(null)},handlePermissionModalError:e=>{x(e,"error"),C(!1),k(null)},handlePlaylistModalCancel:()=>{_(!1)},handlePlaylistModalSuccess:e=>{x(e),N(),_(!1)},handlePlaylistModalError:e=>{x(e,"error"),_(!1)},handleChangeOwnerModalCancel:()=>{P(!1)},handleChangeOwnerModalSuccess:e=>{x(e),U(),P(!1)},handleChangeOwnerModalError:e=>{x(e,"error"),P(!1)},handlePublishStateModalCancel:()=>{E(!1)},handlePublishStateModalSuccess:e=>{x(e),U(),E(!1)},handlePublishStateModalError:e=>{x(e,"error"),E(!1)},handleCategoryModalCancel:()=>{R(!1)},handleCategoryModalSuccess:e=>{x(e),N(),R(!1)},handleCategoryModalError:e=>{x(e,"error"),R(!1)},handleTagModalCancel:()=>{I(!1)},handleTagModalSuccess:e=>{x(e),N(),I(!1)},handleTagModalError:e=>{x(e,"error"),I(!1)},getCsrfToken:F,clearSelection:N,clearSelectionAndRefresh:U}}},5633:function(e,t,n){n.d(t,{B:function(){return i}});var a=n(7460),o=n(1838);function i(e,t,n,i,s,r,l){const u={maxItems:t||255,pageItems:e?Math.min(t,e):1},c={totalItems:0,totalPages:0,nextRequestUrl:(0,o.formatInnerLink)(i,a.PageStore.get("config-site").url)},d={pageItems:0,requestResponse:!1};let h=null;const g=[],m=[];function f(e){let t,n;if(e=isNaN(e)?u.pageItems:e,d.pageItems&&d.pageItems<=m.length?(t=d.pageItems,n=!1,d.pageItems=0):(t=Math.min(e,m.length),n=e>m.length&&!!c.nextRequestUrl,d.pageItems=n?e-m.length:0),t){let e=0;for(;e<t;)g.push(m.shift()),e+=1;"function"==typeof r&&r(g)}n&&p()}function p(e){d.requestResponse=!0,(0,o.getRequest)(c.nextRequestUrl,!1,(function(t){if(d.requestResponse=!1,!t||!t.data)return;let n=t.data,a=void 0!==n.results?n.results:n,o=0;for(;o<a.length&&u.maxItems>m.length;)null!==h&&h===a[o].url||m.push(a[o]),o+=1;c.nextRequestUrl=n.next&&u.maxItems>m.length?n.next:null,e&&(c.totalItems=n.count?n.count:m.length,c.totalItems=Math.min(u.maxItems,c.totalItems),c.totalPages=Math.ceil(c.totalItems/u.pageItems),"function"==typeof s&&s(c.totalItems),"function"==typeof l&&l(n)),f()})),c.nextRequestUrl=null}return null!=n?(0,o.getRequest)((0,o.formatInnerLink)(n,a.PageStore.get("config-site").url),!1,(function(e){if(e&&e.data){let t=e.data,n=void 0!==t.results?t.results:t;n.length&&(h=n[0].url,g.push(n[0]))}p(!0)})):p(!0),{loadItems:function(e){!d.requestResponse&&g.length<c.totalItems&&f(e)},totalPages:function(){return c.totalPages},loadedAllItems:function(){return g.length===c.totalItems},cancelAll:function(){s=null,r=null}}}},6089:function(e,t,n){n.d(t,{$:function(){return r}});var a=n(9471),o=n(6371);let i=[];function s(e){const[t,n]=(0,a.useState)(!1),[o,i]=(0,a.useState)(!0);let s=null,r=null;return(0,a.useEffect)((()=>(s=setTimeout((function(){r=setTimeout((function(){i(!1),r=null}),1e3),s=null,n(!0),e.onHide(e.id)}),5e3),()=>{s&&clearTimeout(s),r&&clearTimeout(r)})),[]),o?a.createElement("div",{className:"notification-item"+(t?" hidden":"")},a.createElement("div",null,a.createElement("span",null,e.children||"No message"))):null}function r(){const[e,t]=(0,a.useState)(i.length);function n(){t(o.default.get("notifications-size")+i.length)}function r(e){const t=[];i.map((n=>{n[0]!==e&&t.push(n)})),i=t}return(0,a.useEffect)((()=>(n(),o.default.on("added_notification",n),()=>o.default.removeListener("added_notification",n))),[]),e?a.createElement("div",{className:"notifications"},a.createElement("div",null,function(){const e=o.default.get("notifications");return[...i.map((e=>a.createElement(s,{key:e[0],id:e[0],onHide:r},e[1]))),...e.map((e=>(i.push(e),a.createElement(s,{key:e[0],id:e[0],onHide:r},e[1]))))]}())," "):null}},6190:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaListRow=void 0;var o=a(n(9471)),i=n(1003);t.MediaListRow=function(e){return o.default.createElement("div",{className:(e.className?e.className+" ":"")+"media-list-row",style:e.style},e.title?o.default.createElement(i.MediaListHeader,{title:e.title,viewAllLink:e.viewAllLink,viewAllText:e.viewAllText}):null,e.children||null)}},6371:function(e,t,n){n.r(t);var a=n(9032),o=n.n(a),i=n(7154),s=n(1838),r=n(3997);function l(){let e=new Uint32Array(3);return window.crypto.getRandomValues(e),(performance.now().toString(36)+Array.from(e).map((e=>e.toString(36))).join("")).replace(/./g,""+Math.random()+Intl.DateTimeFormat().resolvedOptions().timeZone+Date.now())}let u,c=null,d=null;class h extends(o()){constructor(e){super(),d=(0,r.$)(window.MediaCMS),u=new i.BrowserCache(d.site.id,86400),c={mediaAutoPlay:u.get("media-auto-play")},c.mediaAutoPlay=null===c.mediaAutoPlay||c.mediaAutoPlay,this.browserEvents=(0,s.BrowserEvents)(),this.browserEvents.doc(this.onDocumentVisibilityChange.bind(this)),this.browserEvents.win(this.onWindowResize.bind(this),this.onWindowScroll.bind(this)),this.notifications=function(e){let t=[];function n(e){"string"==typeof e&&t.push([l(),e])}return e.map(n),{size:function(){return t.length},push:n,clear:function(){t=[]},messages:function(){return[...t]}}}(void 0!==window.MediaCMS&&void 0!==window.MediaCMS.notifications?window.MediaCMS.notifications:[])}onDocumentVisibilityChange(){this.emit("document_visibility_change")}onWindowScroll(){this.emit("window_scroll")}onWindowResize(){this.emit("window_resize")}initPage(e){c.currentPage=e}get(e){let t;switch(e){case"browser-cache":t=u;break;case"media-auto-play":t=c.mediaAutoPlay;break;case"config-contents":t=d.contents;break;case"config-enabled":t=d.enabled;break;case"config-media-item":t=d.media.item;break;case"config-options":t=d.options;break;case"config-site":t=d.site;break;case"api-playlists":n=e.split("-")[1],t=d.api[n]||null;break;case"notifications-size":t=this.notifications.size();break;case"notifications":t=this.notifications.messages(),this.notifications.clear();break;case"current-page":t=c.currentPage}var n;return t}actions_handler(e){switch(e.type){case"INIT_PAGE":this.initPage(e.page),this.emit("page_init");break;case"TOGGLE_AUTO_PLAY":c.mediaAutoPlay=!c.mediaAutoPlay,u.set("media-auto-play",c.mediaAutoPlay),this.emit("switched_media_auto_play");break;case"ADD_NOTIFICATION":this.notifications.push(e.notification),this.emit("added_notification")}}}t.default=(0,s.exportStore)(new h,"actions_handler")},6568:function(e,t,n){n.d(t,{x:function(){return s}});var a=n(9471),o=n(8713),i=n.n(o);function s(e){let t="spinner-loader";switch(e.size){case"tiny":case"x-small":case"small":case"large":case"x-large":t+=" "+e.size}return a.createElement("div",{className:t},a.createElement("svg",{className:"circular",viewBox:"25 25 50 50"},a.createElement("circle",{className:"path",cx:"50",cy:"50",r:"20",fill:"none",strokeWidth:"1.5",strokeMiterlimit:"10"})))}s.propTypes={size:i().oneOf(["tiny","x-small","small","medium","large","x-large"])},s.defaultProps={size:"medium"}},7256:function(e,t,n){n.d(t,{P:function(){return r}});var a=n(9471),o=n(8713),i=n.n(o),s=n(2828);function r(e){return e.options.map((t=>a.createElement("div",{key:t.id,className:t.id===e.selected?"active":""},a.createElement("button",{onClick:e.onSelect,filter:e.id,value:t.id},a.createElement("span",null,t.title),t.id===e.selected?a.createElement(s.Z,{type:"close"}):null))))}r.propTypes={id:i().string.isRequired,selected:i().string.isRequired,onSelect:i().func.isRequired}},8354:function(e,t,n){n.d(t,{Et:function(){return i},F5:function(){return l},Fq:function(){return s},be:function(){return o},en:function(){return a},ep:function(){return r},p7:function(){return d},q6:function(){return u},tR:function(){return c}});const a=(e,t)=>e>t,o=e=>0===e,i=e=>!isNaN(e)&&e===0+e,s=e=>e===Math.trunc(e),r=e=>a(e,0),l=e=>i(e)&&r(e),u=e=>s(e)&&r(e),c=e=>s(e)&&(r(e)||o(e)),d=(e,t)=>t?d(t,e%t):e},8482:function(e,t,n){n.d(t,{n:function(){return o}});var a=n(1463);function o(e){const t=e.getDate(),n=a.A[e.getMonth()].substring(0,3),o=e.getFullYear(),i=e.getHours(),s=e.getMinutes(),r=e.getSeconds();let l=n+" "+t+", "+o;return l+=" "+(i<10?"0":"")+i,l+=":"+(s<10?"0":"")+s,l+=":"+(r<10?"0":"")+r,l}}},n={};function a(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,a),i.exports}a.m=t,e=[],a.O=function(t,n,o,i){if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],i=e[c][2];for(var r=!0,l=0;l<n.length;l++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(r=!1,i<s&&(s=i));if(r){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,o,i]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=749,function(){var e={749:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,i,s=n[0],r=n[1],l=n[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(l)var c=l(a)}for(t&&t(n);u<s.length;u++)i=s[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},n=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var o=a.O(void 0,[276],(function(){return a(1148)}));o=a.O(o)}();