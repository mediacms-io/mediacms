!function(){"use strict";var e,t={1826:function(e,t,r){var s=r(2985),i=r(9471),n=r(8713),o=r.n(n),l=r(8790),a=r(285),u=r(7664),c=r(2855),d=r(7460),h=r(5338);const g={role:[{id:"all",title:"All"},{id:"editor",title:"Editor"},{id:"manager",title:"Manager"}],approved:[{id:"all",title:"All"},{id:"true",title:"Yes"},{id:"false",title:"No"}]};function f(e){const{userCan:t}=(0,h.useUser)(),[r,s]=(0,i.useState)(e.hidden),[n,o]=(0,i.useState)("all"),[l,a]=(0,i.useState)("all"),c=(0,i.useRef)(null),f=(0,i.useRef)(null);function m(){r||(c.current.style.height=24+f.current.offsetHeight+"px")}function p(t){const r={role:n,is_approved:l};switch(t.currentTarget.getAttribute("filter")){case"role":r.role=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(r),o(r.role);break;case"approved":r.is_approved=t.currentTarget.getAttribute("value"),e.onFiltersUpdate(r),a(r.is_approved)}}return(0,i.useEffect)(()=>{s(e.hidden),m()},[e.hidden]),(0,i.useEffect)(()=>(d.PageStore.on("window_resize",m),()=>d.PageStore.removeListener("window_resize",m)),[]),i.createElement("div",{ref:c,className:"mi-filters-row"+(r?" hidden":"")},i.createElement("div",{ref:f,className:"mi-filters-row-inner"},i.createElement("div",{className:"mi-filter"},i.createElement("div",{className:"mi-filter-title"},"ROLE"),i.createElement("div",{className:"mi-filter-options"},i.createElement(u.FilterOptions,{id:"role",options:g.role,selected:n,onSelect:p}))),t.usersNeedsToBeApproved?i.createElement("div",{className:"mi-filter"},i.createElement("div",{className:"mi-filter-title"},"APPROVED"),i.createElement("div",{className:"mi-filter-options"},i.createElement(u.FilterOptions,{id:"approved",options:g.approved,selected:l,onSelect:p}))):null))}f.propTypes={hidden:o().bool},f.defaultProps={hidden:!1};var m=r(9835),p=r(9479);function v(e,t,r,s){return e+"?"+t+(""===t?"":"&")+r+(""===r?"":"&")+"page="+s}class C extends p.Y{constructor(e){super(e,"manage-users"),this.state={resultsCount:null,currentPage:1,requestUrl:l.ApiUrlContext._currentValue.manage.users,hiddenFilters:!0,filterArgs:"",sortingArgs:"",sortBy:"add_date",ordering:"desc",refresh:0},this.getCountFunc=this.getCountFunc.bind(this),this.onTablePageChange=this.onTablePageChange.bind(this),this.onToggleFiltersClick=this.onToggleFiltersClick.bind(this),this.onFiltersUpdate=this.onFiltersUpdate.bind(this),this.onColumnSortClick=this.onColumnSortClick.bind(this),this.onItemsRemoval=this.onItemsRemoval.bind(this),this.onItemsRemovalFail=this.onItemsRemovalFail.bind(this)}onTablePageChange(e,t){this.setState({currentPage:t,requestUrl:v(l.ApiUrlContext._currentValue.manage.users,this.state.filterArgs,this.state.sortingArgs,t)})}onToggleFiltersClick(){this.setState({hiddenFilters:!this.state.hiddenFilters})}getCountFunc(e){this.setState({resultsCount:e})}onFiltersUpdate(e){const t=[];for(let r in e)null!==e[r]&&"all"!==e[r]&&t.push(r+"="+e[r]);this.setState({filterArgs:t.join("&"),requestUrl:v(l.ApiUrlContext._currentValue.manage.users,t.join("&"),this.state.sortingArgs,this.state.currentPage)})}onColumnSortClick(e,t){const r="sort_by="+e+"&ordering="+t;this.setState({sortBy:e,ordering:t,sortingArgs:r,requestUrl:v(l.ApiUrlContext._currentValue.manage.users,this.state.filterArgs,r,this.state.currentPage)})}onItemsRemoval(e){this.setState({resultsCount:null,refresh:this.state.refresh+1,requestUrl:l.ApiUrlContext._currentValue.manage.users},function(){e?a.PageActions.addNotification("The users deleted successfully.","usersRemovalSucceed"):a.PageActions.addNotification("The user deleted successfully.","userRemovalSucceed")})}onItemsRemovalFail(e){e?a.PageActions.addNotification("The users removal failed. Please try again.","usersRemovalFailed"):a.PageActions.addNotification("The user removal failed. Please try again.","userRemovalFailed")}pageContent(){return[i.createElement(c.MediaListWrapper,{key:"2",title:this.props.title+(null===this.state.resultsCount?"":" ("+this.state.resultsCount+")")},i.createElement(u.FiltersToggleButton,{onClick:this.onToggleFiltersClick}),i.createElement(f,{hidden:this.state.hiddenFilters,onFiltersUpdate:this.onFiltersUpdate}),i.createElement(m.D,{pageItems:50,manageType:"users",key:this.state.requestUrl+"["+this.state.refresh+"]",itemsCountCallback:this.getCountFunc,requestUrl:this.state.requestUrl,onPageChange:this.onTablePageChange,sortBy:this.state.sortBy,ordering:this.state.ordering,onRowsDelete:this.onItemsRemoval,onRowsDeleteFail:this.onItemsRemovalFail,onClickColumnSort:this.onColumnSortClick}))]}}C.propTypes={title:o().string.isRequired},C.defaultProps={title:"Manage users"},(0,s.C)("page-manage-users",C)}},r={};function s(e){var i=r[e];if(void 0!==i)return i.exports;var n=r[e]={exports:{}};return t[e].call(n.exports,n,n.exports,s),n.exports}s.m=t,e=[],s.O=function(t,r,i,n){if(!r){var o=1/0;for(c=0;c<e.length;c++){r=e[c][0],i=e[c][1],n=e[c][2];for(var l=!0,a=0;a<r.length;a++)(!1&n||o>=n)&&Object.keys(s.O).every(function(e){return s.O[e](r[a])})?r.splice(a--,1):(l=!1,n<o&&(o=n));if(l){e.splice(c--,1);var u=i();void 0!==u&&(t=u)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[r,i,n]},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.j=101,function(){var e={101:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var i,n,o=r[0],l=r[1],a=r[2],u=0;if(o.some(function(t){return 0!==e[t]})){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(a)var c=a(s)}for(t&&t(r);u<o.length;u++)n=o[u],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(c)},r=self.webpackChunkmediacms_frontend=self.webpackChunkmediacms_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var i=s.O(void 0,[276],function(){return s(1826)});i=s.O(i)}();